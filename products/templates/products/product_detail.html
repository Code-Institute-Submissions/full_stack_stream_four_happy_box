{% extends "base.html" %} {% load bootstrap_tags %} {% block content %}

<div class="container">
  <div class="row">
    <div class=col-sm-8>
      <div class="row">
      <div class="col-xs-10 col-xs-offset-1">
        <a data-fancybox="gallery" href="{{MEDIA_URL}}{{product.image}}"><img class="img-responsive" src="{{MEDIA_URL}}{{product.image}}" alt=""></a>
      </div>
      </div>
      <div class="row">
        {% for i in images %}
         <div class="col-xs-2">
        <a class = "thumbnail" data-fancybox="gallery" href={{i.gallery_image.url}}><img width="70%" class="card-img-top img-fluid" src="{{i.gallery_image.url}}" alt=""><br>
        </a>
        </div>
        {% endfor %}
      </div>
    </div>
    
    <div class=col-sm-4>
      <h2>{{product.name}}</h2>
        <h3>â‚¬{{product.price}} </h3>
        {% if not in_wishlist %}
        <form action="{% url 'add_to_wishlist' %}?next={{request.path}}" method="post" id="empty_heart_form">
          <div id="tooltip" class="arrow_box">
            <p>Add to <a href="{% url 'view_wishlist' %}">Wishlist</a></p>
          </div>
          {% csrf_token %}
          <input type="hidden" name="id" value="{{product.id}}" />
          <button type="submit" class="btn wish_button
          ">
            <i id="empty_heart_icon" class="far fa-heart fa-2x" type="submit"></i>
          </button>
        </form>
        {% else %}
        <div id="tooltip_remove" class="arrow_box">
          <p>Remove from <a href="{% url 'view_wishlist' %}">Wishlist</a></p>
        </div>
        <form action="{% url 'remove_wishlist_item' product.id %}?next={{request.path}}" method="post" id="full_heart_form">
          {% csrf_token %}
          <button type="submit" class="btn">
            <i class="far fa-heart" type="submit"></i>
          </button>
        </form>
        {% endif %}
      

      <p class="card-text">Category: {{product.category}}</p>
      <p class="card-text">{{product.description}}</p>
      <h5>Box Contents:</h5>
      <ul>
      <li>{{product.cover_image_name}}</li>
    
      {% for i in images %}
      {% if i.name|length %}
       <li>{{i.name}}</li>
       {% endif %}
        {% endfor %}
        </ul>
        
      <p class="stars_and_reviews_view_product">
        {% if product.stars %} {% for star in product.stars %}
        <i class="fas fa-star"></i> {% endfor %} {% if product.needs_half_star %}
        <i class="fa fa-star-half"></i> {% endif %} {{product.average_rating}} avg rating
        <a>See Reviews</a> {% else %}
        <p>
          <i class="far fa-star"></i>
          <i class="far fa-star"></i>
          <i class="far fa-star"></i>
          <i class="far fa-star"></i>
          <i class="far fa-star"></i> No reviews yet
          <a>Leave a Review</a>
        </p>
        {% endif %}
      </p>
      <p class="product_order">
        <form action="{% url 'add_to_cart' %}?next={{request.path}}" method="post">
          {% csrf_token %}
          <input type="hidden" name="id" value="{{product.id}}" /> Quantity
          <input class="form-control quantity_form" type="number" name="quantity" value="1" max="5" min="1" />
          <input class="btn cart_button" type="submit" value="Add To Cart" />
        </form>
      </p>
    </div>
  </div>
</div>
  <div class="row">
    <div class="col-sm-12">
      {% include "reviews/show_reviews.html" %} {% if user.is_authenticated %} {% include "reviews/add_review_form.html" %} {% else %}
      <p><a href="{% url 'login' %}?next={{request.path}}">Login</a> or <a href="{% url 'register' %}?next={{request.path}}">Register</a> to Leave a Review</p>
      {% endif %}
    </div>
  </div>

</div>

{% endblock content %}
