{% extends 'base.html' %} {% load static from staticfiles %} {% block content %}
<div class="container">
    <div class="row" style="margin-top: 6%">

        <div class="col-sm-8 blog-main">

            <div class="blog-post">
                <div class="row">
                    <div class="card">
                        <div class="card-body">
                            <div class="col-md-6 text-right">
                                <img src="{{ product.image.url }}" alt="...">
                            </div>
                            <div class="col-md-6" style="padding-left: 100px">
                                <h3>{{ product.name }}</h3>
                                <h6><a href="#">{{ product.category }}</a></h6>
                                <p class="text-muted"> {{ product.price }}</p>

                                <p>{{ product.description|safe|linebreaksbr }}</p>
                                <form method="post" action="{% url 'add_to_cart' product.id %}">
                                    {% csrf_token %}
                                    <div class="input-group">
                                        <input name='quantity' type="number" min="1" max="999" class="form-control" placeholder="Quantity">
                                        <span class="input-group-btn">
                            <button class="btn btn-info" type="submit">Add to Cart</button>
                          </span>
                                    </div>
                                    <!-- /input-group -->

                                </form>
                                {% if not in_wishlist %}
                                <form action="{% url 'add_to_wishlist' %}?next={{request.path}}" method="post" id="empty_heart_form">
                                    <div id="tooltip" class="arrow_box">
                                        <p>Add to <a href="{% url 'view_wishlist' %}">Wishlist</a></p>
                                    </div>
                                    {% csrf_token %}
                                    <input type="hidden" name="id" value="{{product.id}}" />
                                    <button type="submit" class="btn">
            <i id="empty_heart_icon" class="far fa-heart fa-2x" type="submit"></i>
          </button>
                                </form>
                                {% else %}
                                <div id="tooltip_remove" class="arrow_box">
                                    <p>Remove from <a href="{% url 'view_wishlist' %}">Wishlist</a></p>
                                </div>
                                <form action="{% url 'remove_wishlist_item' product.id %}?next={{request.path}}" method="post" id="full_heart_form">
                                    {% csrf_token %}
                                    <button type="submit" class="btn">
            <i id="full_heart_icon" class="fas fa-heart fa-2x" type="submit"></i>
                    
          </button>
                                </form>

                                {% endif %}
                            </div>
                            <p class="card-text">{{product.description}}</p>
                            <p class="stars_and_reviews_view_product">
                                {% if product.stars %} {% for star in product.stars %}
                                <i class="fas fa-star"></i> {% endfor %} {% if product.needs_half_star %}
                                <i class="fa fa-star-half"></i> {% endif %} {{product.average_rating}} avg rating
                                <a>See Reviews</a> {% else %}
                                <p>
                                    <i class="far fa-star"></i>
                                    <i class="far fa-star"></i>
                                    <i class="far fa-star"></i>
                                    <i class="far fa-star"></i>
                                    <i class="far fa-star"></i> No reviews yet
                                    <a>Leave a Review</a>
                                </p>
                                {% endif %}
                            </p>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            {% include "reviews/show_reviews.html" %} {% if user.is_authenticated %} {% include "reviews/add_review_form.html" %} {% else %}
                            <p><a href="{% url 'login' %}?next={{request.path}}">Login</a> or <a href="{% url 'register' %}?next={{request.path}}">Register</a> to Leave a Review</p>
                            {% endif %}
                        </div>
                    </div>
                </div>


            </div>
            <!-- /.blog-post -->

        </div>
        <!-- /.blog-main -->
    </div>
    <!-- /.row -->

</div>
<!-- /.container -->
{% endblock %}
